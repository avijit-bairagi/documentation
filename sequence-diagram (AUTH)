title AUTH SERVER AND GEATEWAY (AUTH REQUEST)
actor USER#green
entryspacing 1.9
note over USER#yellow:CORPNET/PG/SOAPUP
participant GATEWAY#silver
participant AUTH-SERVER#red
note over AUTH-SERVER#yellow:1.....n
control AUTH-SERVICE#RED

participantgroup #lightgreen **   EXTERNAL \nDATA SOURCE**
database CORPNET#green
database PG#green
database N#green
end


participantgroup #lightgreen **    INTERNAL \nDATA SOURCE**
database AUTH-DB#BLUE
database AUTH-CACHE#BLACK
end

bottomparticipants

USER->GATEWAY:CALL <color:#green>//**/auth/***//</color>

note over USER,GATEWAY#33FFA4:**\nHTTP HEADER\nService-Code: CORPNET/\nCORPNET-GROUP\n**

linear
GATEWAY->AUTH-SERVER: forward request
AUTH-SERVER->AUTH-SERVICE: auth request
AUTH-SERVICE->CORPNET: AUTHNICATE
CORPNET->PG:
PG->N:
N->AUTH-DB:             SAVE \nTOKEN, PRIVILEGE
AUTH-DB->AUTH-CACHE:
linear off
